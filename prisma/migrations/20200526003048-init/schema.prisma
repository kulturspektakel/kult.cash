datasource sqlite {
  provider = "sqlite"
  url = "***"
}

generator client {
  provider = "prisma-client-js"
}

model Device {
  id            String        @id
  lastSeen      DateTime?
  latestVersion Int?
  transactions  Transaction[]
  list          List?         @relation(fields: [listName], references: [name])
  listName      String?
}

model List {
  name     String   @id
  emoji    String?
  product1 String?
  price1   Int?
  product2 String?
  price2   Int?
  product3 String?
  price3   Int?
  product4 String?
  price4   Int?
  product5 String?
  price5   Int?
  product6 String?
  price6   Int?
  product7 String?
  price7   Int?
  product8 String?
  price8   Int?
  product9 String?
  price9   Int?
  devices  Device[]
}

model Transaction {
  id            String     @id
  device        Device     @relation(fields: [deviceId], references: [id])
  deviceId      String
  mode          Int
  deviceTime    DateTime
  card          String
  balanceBefore Int
  tokensBefore  Int
  balanceAfter  Int
  tokensAfter   Int
  listName      String
  cartItems     CartItem[]
  createdAt     DateTime   @default(now())
}

model CartItem {
  transaction   Transaction @relation(fields: [transactionId], references: [id])
  transactionId String
  product       String
  price         Int
  amount        Int

  @@id([transactionId, product])
}

model Session {
  token   String   @id
  userId  String
  expires DateTime
}
